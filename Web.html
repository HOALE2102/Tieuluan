<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ministore - Điện thoại chính hãng</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #d70018; 
            --bg-color: #f4f4f4;
            --white: #ffffff;
            --text-color: #333;
            --border-color: #e0e0e0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-color); padding-bottom: 50px; }

        header {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        .nav-wrapper { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 24px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .search-box { flex: 1; max-width: 500px; margin: 0 20px; position: relative; }
        .search-box input {
            width: 100%; padding: 10px 15px; border-radius: 5px; border: none; outline: none;
        }
        .nav-links button {
            background: rgba(255,255,255,0.2); border: none; color: white;
            padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: 600; margin-left: 10px;
            transition: 0.3s;
        }
        .nav-links button:hover { background: rgba(255,255,255,0.4); }

        .section { display: none; padding-top: 20px; }
        .section.active { display: block; animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h2.section-title { margin-bottom: 20px; font-size: 20px; border-left: 5px solid var(--primary-color); padding-left: 10px; text-transform: uppercase; }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); /* Card to hơn 1 chút */
            gap: 15px;
        }
        .product-card {
            background: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            border: 1px solid transparent;
            display: flex;
            flex-direction: column;
        }
        .product-card:hover { transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.15); border-color: var(--primary-color); }
        
        .card-img-wrapper {
            width: 100%;
            height: 220px; 
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
        }
        .card-img { 
            max-width: 100%; 
            max-height: 100%; 
            object-fit: contain; 
        }
        
        .card-body { padding: 15px; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .card-title { font-size: 14px; margin-bottom: 5px; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; font-weight: 600; }
        .card-price { color: var(--primary-color); font-weight: bold; font-size: 16px; margin-top: 5px; }
        
        .admin-controls { margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border-radius: 8px; }
        .admin-table { width: 100%; border-collapse: collapse; background: var(--white); box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden; }
        .admin-table th, .admin-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #eee; vertical-align: middle; }
        .admin-table th { background-color: #f8f9fa; font-weight: 700; color: #555; }
        .admin-table tr:hover { background-color: #ffffef; cursor: pointer; }
        
        .status-badge { padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; display: inline-block; }
        .status-active { background: #d4edda; color: #155724; }
        .status-inactive { background: #f8d7da; color: #721c24; }

        .pagination { display: flex; justify-content: flex-end; margin-top: 20px; gap: 5px; }
        .page-btn { padding: 8px 14px; border: 1px solid var(--border-color); background: var(--white); cursor: pointer; border-radius: 4px; }
        .page-btn.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }
        .page-btn:hover:not(.active) { background: #eee; }

        .detail-container { background: var(--white); padding: 30px; border-radius: 10px; display: flex; gap: 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .detail-img-box { flex: 1; display: flex; align-items: center; justify-content: center; border: 1px solid #eee; border-radius: 10px; padding: 20px; }
        .detail-img-box img { max-width: 100%; max-height: 400px; object-fit: contain; }
        .detail-info { flex: 1.5; }
        .detail-price { font-size: 32px; color: var(--primary-color); font-weight: bold; margin: 15px 0; }
        .back-btn { margin-bottom: 15px; cursor: pointer; color: #666; font-weight: 500; display: inline-flex; align-items: center; gap: 5px; }
        .back-btn:hover { color: var(--primary-color); }
        
        .btn-action { margin-top: 20px; padding: 15px 40px; background: linear-gradient(to right, #d70018, #f03e3e); color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 16px; box-shadow: 0 4px 6px rgba(215, 0, 24, 0.3); transition: 0.3s; }
        .btn-action:hover { box-shadow: 0 6px 12px rgba(215, 0, 24, 0.4); transform: translateY(-2px); }

        @media (max-width: 768px) {
            .detail-container { flex-direction: column; }
            .nav-wrapper { flex-wrap: wrap; }
            .search-box { order: 3; min-width: 100%; margin: 10px 0 0; }
            .nav-links button span { display: none; }  
        }
    </style>
</head>
<body>

    <header>
        <div class="container nav-wrapper">
            <div class="logo" onclick="switchView('user')">
                <i class="fas fa-mobile-alt"></i> MiniStore
            </div>
            
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Bạn muốn tìm gì hôm nay?" onkeyup="handleSearch(this.value)">
            </div>

            <div class="nav-links">
                <button onclick="switchView('user')" title="Trang chủ"><i class="fas fa-home"></i> <span>Trang chủ</span></button>
                <button onclick="switchView('admin')" title="Quản lý Admin"><i class="fas fa-tasks"></i> <span>Quản lý SP</span></button>
            </div>
        </div>
    </header>

    <div class="container">
        
        <section id="user-view" class="section active">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                <h2 class="section-title" style="margin-bottom: 0;">Sản phẩm mới nhất</h2>
                <div style="font-size: 14px; color: #666;">
                    <i class="fas fa-filter"></i> Sắp xếp: Phổ biến
                </div>
            </div>
            
            <div class="product-grid" id="userProductList">
                </div>
        </section>

        <section id="admin-view" class="section">
            <h2 class="section-title">Danh sách sản phẩm (Admin)</h2>
            
            <div class="admin-controls">
                <strong id="totalProducts">Tổng: 0 sản phẩm</strong>
                <button style="padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    <i class="fas fa-plus"></i> Thêm mới
                </button>
            </div>

            <table class="admin-table">
                <thead>
                    <tr>
                        <th width="50">ID</th>
                        <th width="80">Ảnh</th>
                        <th>Tên sản phẩm</th>
                        <th>Thương hiệu</th>
                        <th>Giá bán</th>
                        <th>Trạng thái</th>
                    </tr>
                </thead>
                <tbody id="adminProductTable">
                    </tbody>
            </table>

            <div class="pagination" id="paginationControls"></div>
        </section>

        <section id="detail-view" class="section">
            <div class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i> Quay lại danh sách
            </div>
            <div class="detail-container">
                <div class="detail-img-box">
                    <img id="detailImage" src="" alt="Product Image">
                </div>
                <div class="detail-info">
                    <h1 id="detailName" style="font-size: 26px; line-height: 1.3; margin-bottom: 10px;"></h1>
                    
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <span id="detailBrand" style="background: #f0f0f0; padding: 4px 10px; border-radius: 4px; font-size: 13px;"></span>
                        <span id="detailStatus"></span>
                    </div>

                    <div id="detailPrice" class="detail-price"></div>
                    
                    <div style="background: #fff5f5; border: 1px solid #ffcccc; padding: 10px; border-radius: 5px; margin-bottom: 20px; font-size: 14px; color: #d70018;">
                        <i class="fas fa-gift"></i> Giảm thêm 5% khi thanh toán qua QR Code
                    </div>

                    <h3 style="font-size: 16px; margin-bottom: 10px;">Đặc điểm nổi bật:</h3>
                    <p id="detailDesc" style="line-height: 1.6; color: #555; text-align: justify;"></p>
                    
                    <button class="btn-action">
                        <i class="fas fa-shopping-cart"></i> MUA NGAY
                    </button>
                </div>
            </div>
        </section>

    </div>

    <script>
        
        const rawImages = [
            "https://happyphone.vn/wp-content/uploads/2024/04/Oppo-A18-4GB-128GB.jpg",
            "https://image.dienthoaivui.com.vn/x,webp,q90/https://dashboard.dienthoaivui.com.vn/uploads/dashboard/editor_upload/dong-dien-thoai-oppo-nao-tot-nhat-8.jpg", 
            "https://cdn-v3.xtmobile.vn/vnt_upload/news/04_2024/thumbs/(480x218)_crop_danh-gia-samsung-galaxy-z-trifold-xtmobile.jpg", 
            "https://kenh14cdn.com/203336854389633024/2025/10/31/photo-1761908247928-17619082481681790692868-1761909710810-17619097111351718197123.jpeg", 
            "https://happyphone.vn/wp-content/uploads/2024/03/Oppo-A58-5G-6GB-128GB.png", 
            "https://www.anphatpc.com.vn/media/news/2710_Macbook2.jpg", 
            "https://cdn.tgdd.vn/News/0/co-nen-mua-macbook-pro-cu-chia-se-kinh-nghiem-2-800x400.jpg"  
        ];

        const brands = ["Apple", "Samsung", "Oppo", "Huawei", "Xiaomi", "Google"];
        
        
        const products = Array.from({ length: 24 }, (_, i) => {
            const imgIndex = i % rawImages.length; 
            const brandIndex = i % brands.length;
            const isCheap = i % 3 === 0;
            
            return {
                id: i + 1,
                name: `${brands[brandIndex]} Smartphone Pro Max ${i + 1} - Chính hãng`,
                price: isCheap ? 8990000 + (i * 200000) : 24000000 + (i * 500000),
                brand: brands[brandIndex],
                image: rawImages[imgIndex],
                status: i === 3 || i === 15 ? "Hết hàng" : "Còn hàng",
                description: "Sản phẩm chính hãng với thiết kế nguyên khối sang trọng. Màn hình 120Hz mượt mà, camera độ phân giải cao chụp đêm sắc nét. Chip xử lý thế hệ mới giúp chiến game mượt mà."
            };
        });

        let currentPage = 1;
        const itemsPerPage = 8; 
        let currentViewMode = 'user';
        let filteredProducts = [...products];


        const formatMoney = (amount) => {
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);
        };

        function switchView(viewName) {
            document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
            document.getElementById(`${viewName}-view`).classList.add('active');
            currentViewMode = viewName;
            
            filteredProducts = [...products]; 
            document.getElementById('searchInput').value = '';
            
            if (viewName === 'user') renderUserView();
            if (viewName === 'admin') {
                currentPage = 1;
                renderAdminView();
            }
        }

        function handleSearch(keyword) {
            const lowerKeyword = keyword.toLowerCase();
            filteredProducts = products.filter(p => p.name.toLowerCase().includes(lowerKeyword) || p.brand.toLowerCase().includes(lowerKeyword));
            
            if (currentViewMode === 'user') renderUserView();
            else { currentPage = 1; renderAdminView(); }
        }

        function renderUserView() {
            const container = document.getElementById('userProductList');
            container.innerHTML = '';
            if(filteredProducts.length === 0) {
                container.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 20px;">Không tìm thấy sản phẩm nào.</div>';
                return;
            }

            filteredProducts.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.onclick = () => showDetail(product);
                card.innerHTML = `
                    <div class="card-img-wrapper">
                        <img src="${product.image}" class="card-img" alt="${product.name}">
                    </div>
                    <div class="card-body">
                        <h3 class="card-title">${product.name}</h3>
                        <div class="card-price">${formatMoney(product.price)}</div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function renderAdminView() {
            const tbody = document.getElementById('adminProductTable');
            const paginationDiv = document.getElementById('paginationControls');
            const totalSpan = document.getElementById('totalProducts');

            tbody.innerHTML = '';
            totalSpan.innerText = `Tổng: ${filteredProducts.length} sản phẩm`;

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedItems = filteredProducts.slice(startIndex, endIndex);

            paginatedItems.forEach(product => {
                const tr = document.createElement('tr');
                tr.onclick = () => showDetail(product);
                const statusClass = product.status === "Còn hàng" ? "status-active" : "status-inactive";
                
                tr.innerHTML = `
                    <td>#${product.id}</td>
                    <td><img src="${product.image}" width="40" height="40" style="object-fit:contain; border:1px solid #eee; border-radius:4px; padding:2px;"></td>
                    <td style="font-weight:600; color: #333;">${product.name}</td>
                    <td>${product.brand}</td>
                    <td style="color: var(--primary-color); font-weight:bold;">${formatMoney(product.price)}</td>
                    <td><span class="status-badge ${statusClass}">${product.status}</span></td>
                `;
                tbody.appendChild(tr);
            });

            const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
            paginationDiv.innerHTML = '';
            if (totalPages > 1) {
                for (let i = 1; i <= totalPages; i++) {
                    const btn = document.createElement('button');
                    btn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
                    btn.innerText = i;
                    btn.onclick = () => { currentPage = i; renderAdminView(); };
                    paginationDiv.appendChild(btn);
                }
            }
        }

        function showDetail(product) {
            document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
            document.getElementById('detail-view').classList.add('active');
            window.scrollTo(0, 0); 

            document.getElementById('detailImage').src = product.image;
            document.getElementById('detailName').innerText = product.name;
            document.getElementById('detailBrand').innerText = `Thương hiệu: ${product.brand}`;
            document.getElementById('detailPrice').innerText = formatMoney(product.price);
            document.getElementById('detailDesc').innerText = product.description;
            
            const statusEl = document.getElementById('detailStatus');
            statusEl.innerText = product.status;
            statusEl.className = product.status === "Còn hàng" 
                ? "status-badge status-active" 
                : "status-badge status-inactive";
        }

        function goBack() {
            switchView(currentViewMode);
        }

        switchView('user'); 

    </script>
</body>
</html>